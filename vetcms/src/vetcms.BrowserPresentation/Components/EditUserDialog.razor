@using vetcms.ClientApplication.Common.CommandAbstraction;
@using vetcms.SharedModels.Common.IAM.Authorization;
@implements IDialogContentComponent<IUserFieldRelatedCommand>

<FluentMultiSplitter>
    <FluentMultiSplitterPane Size="20%" Min="50px" Max="70%">
        <FluentGrid style="z-index: 1000;">
            <FluentGridItem xs="12" sm="6">
                <FluentTextField @bind-Value="Content.Email" Label="Email" TextFieldType="TextFieldType.Email"/>
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                <FluentTextField @bind-Value="Content.VisibleName" Label="Megjelenített név" />
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                <FluentTextField @bind-Value="Content.FirstName" Label="Keresztnév" />
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                <FluentTextField @bind-Value="Content.LastName" Label="Vezetéknév" />
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                <FluentTextField @bind-Value="Content.Address" Label="Lakcím" />
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                <FluentDatePicker Label="Days view" AriaLabel="To" @bind-Value="Content.DateOfBirth" />
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                <FluentTextField @bind-Value="Content.PhoneNumber" TextFieldType="TextFieldType.Tel" Label="Irányítószám" />
            </FluentGridItem>
            <FluentGridItem xs="12" sm="6">
                
            </FluentGridItem>
        </FluentGrid>
    </FluentMultiSplitterPane>
    <FluentMultiSplitterPane Size="30%">
        <FluentSelect TOption="PermissionFlags"
                    Label="Egyéni jogosultságok:"
                    Items="AvaliableFlags"
                    Id="people-listbox2"
                    Multiple="true"
                    OptionValue="@(p => p.ToString())"
                    OptionText="@(p => Enum.GetName(typeof(PermissionFlags), p))"
                    @bind-SelectedOptions="AssignedFlags" />
    </FluentMultiSplitterPane>
</FluentMultiSplitter>


@code {
    [Parameter]
    public IUserFieldRelatedCommand Content { get;  set; }

    [CascadingParameter]
    public FluentDialog? Dialog { get; set; }

    private IEnumerable<PermissionFlags>? AssignedFlags;
    private List<PermissionFlags> AvaliableFlags = PermissionFlags.GetValues(typeof(PermissionFlags)).Cast<PermissionFlags>().ToList();

    record SimleUser1() : IUserFieldRelatedCommand
    {
        public int TargetUserId { get; set; }
        public string Email { get; set; }
        public string PhoneNumber { get; set; }
        public string VisibleName { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Address { get; set; }
        public DateTime? DateOfBirth { get; set; }
    }
}